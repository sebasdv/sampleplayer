<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Sampler Player</title>
    <style>
        /* Estilos previos... */

        .pad-controls {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 5px;
        }

        .load-audio {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 5px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
            margin: 2px 2px;
            cursor: pointer;
            border-radius: 5px;
        }

        .load-audio input[type="file"] {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Contenido HTML previo... -->

    <script>
        // Variables y funciones previas...

        function createPadGrid() {
            const grid = document.getElementById('pad-grid');
            for (let i = 1; i <= 16; i++) {
                const pad = document.createElement('div');
                pad.className = 'pad';
                pad.dataset.number = i;
                const padContent = document.createElement('div');
                padContent.className = 'pad-content';
                padContent.textContent = i;
                pad.appendChild(padContent);

                // Añadir controles de carga de audio
                const padControls = document.createElement('div');
                padControls.className = 'pad-controls';
                const loadButton = createLoadButton(i);
                padControls.appendChild(loadButton);
                pad.appendChild(padControls);

                pad.addEventListener('touchstart', handlePadInteraction, { passive: false });
                pad.addEventListener('touchend', handlePadTouchEnd, { passive: false });
                pad.addEventListener('mousedown', handlePadInteraction);
                pad.addEventListener('mouseup', handlePadMouseUp);

                grid.appendChild(pad);
            }
        }

        function createLoadButton(padNumber) {
            const label = document.createElement('label');
            label.className = 'load-audio';
            label.textContent = 'Load';

            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'audio/wav';
            input.addEventListener('change', (event) => handleFileSelect(event, padNumber));

            label.appendChild(input);
            return label;
        }

        function handleFileSelect(event, padNumber) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const arrayBuffer = e.target.result;
                    audioContext.decodeAudioData(arrayBuffer)
                        .then(audioBuffer => {
                            samples[padNumber] = audioBuffer;
                            updateStatus(`Archivo de audio cargado en el Pad ${padNumber}`);
                            document.querySelector(`.pad:nth-child(${padNumber})`).classList.add('loaded');
                        })
                        .catch(error => {
                            console.error('Error decoding audio data:', error);
                            updateStatus('Error al cargar el archivo de audio');
                        });
                };
                reader.readAsArrayBuffer(file);
            }
        }

        // Resto del código...

    </script>
</body>
</html>
